<!DOCTYPE html>
<head><meta charset="utf-8" http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Thermometer</title>

    <!-- include the Tools -->
  <script src="./jQuery_files/jquery.tools.min.js"></script>
  
  <!-- standalone page styling (can be removed) -->
  <link rel="shortcut icon" href="http://jquerytools.org/media/img/favicon.ico">
  <link rel="stylesheet" type="text/css" href="./jQuery_files/standalone.css">

  <link rel="stylesheet" type="text/css" href="./jQuery_files/skin1.css">
<style>
	/* Override skin1.css to make it vertical */
    
    /* height is now larger than width  */
    .slider {
		height:390px;
		width:9px;
        background:white;
        
	}
    
	/* tweak drag handle position */
	.handle {
        left:5px;
    }
    .handle:hover{
        background:darkgray;
    }
    .handle:active{
        background:darkgray;
    }
    
	/* position progressbar on the bottom edge */
	.progress {
		width:9px;
		position:absolute;
		bottom:0;
        background:red;
	}
    
    .range {
        display:none;
    }
    
    #myCanvas {
        border: 2px solid #9C9898;
        -moz-border-radius:30px;
        -webkit-border-radius:30px;
        background:white;
        opacity:0.95;
    }
    
    #canvaswrapper
    {
        position:absolute;
        top:2%;
        bottom:2%;
        left:20%;
        right:20%;
       /* border: 1px solid green;*/
        text-align:center;
    }
    
    #liquidwrapper
    {
        position:absolute;
        top:32px;
        left:49.3%;
        right:49.3%;
        align:center;
        /*border:1px solid red;*/
    }
    
    #backgroundR
    {
        position:absolute;
        top:0;
        bottom:75%;
        left:0;
        right:0;
        background:PaleVioletRed;
    }
    #backgroundY
    {
        position:absolute;
        top:25%;
        bottom:50%;
        left:0;
        right:0;
        background:Gold;
    }
    #backgroundB
    {
        position:absolute;
        top:75%;
        bottom:0;
        left:0;
        right:0;
        background:cornflowerblue;
    }
    #backgroundG
    {
        position:absolute;
        top:50%;
        bottom:25%;
        left:0;
        right:0;
        background:#6b8e23;
    }
    #background
    {
        position:absolute;
        top:0;
        bottom:0;
        left:0;
        right:0;
        background:darkgreen;
    }

    #cbox
    {
        position:absolute;
        top:15%;
        left:20%;
    }
    #cdegree
    {
        position:absolute;
        top:16%;
        left:36%;
        font-size:30px;
    }
    #Cvalue {
        border:1px inset #ddd;
        float:left;
        font-size:30px;
        margin:0 0 15px 15px;
        padding:3px 3px;
        text-align:center;
        width:85px;
        -moz-border-radius:5px;
        -webkit-border-radius:5px;
    }
    
    #fbox
    {
        position:absolute;
        top:15%;
        right:25%;
        font-size:30px;
    }
    #fdegree
    {
        position:absolute;
        top:16%;
        right:20%;
        font-size:30px;
    }
    #Fvalue
    {
        border:1px inset #ddd;
        float:left;
        font-size:30px;
        margin:0 0 15px 15px;
        padding:3px 3px;
        text-align:center;
        width:85px;
        -moz-border-radius:5px;
        -webkit-border-radius:5px;
    }

    
</style>
        
</head>

    <body>
        <div id="backgroundR"></div>
        <div id="backgroundY"></div>
        <div id="backgroundB"></div>
        <div id="backgroundG"></div>
        <!--
        <div id="background"></div>
        -->
        <div type="diamond"></div>
        <div id="canvaswrapper">
            <canvas id="myCanvas" width="500" height="500">
            Oops, your browser does not support HTML5 Canvas, therefore our thermometer does not work. Please try again with another browser such as Firefox, Chrome, Opera, Safari or Konqueror.
            </canvas>
            <script>
                var canvas = document.getElementById('myCanvas');
                
                var context = canvas.getContext('2d');
                var centerX = canvas.width/2;
                var centerY = canvas.height - 25;
                var radius = 20;
                // draw the red bulb
                context.beginPath();
                context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
                context.fillStyle = 'red';
                context.fill();
                context.closePath();
                // draw the red column
                context.fillRect(centerX-4.5,canvas.height-80,9,50);
                //context.fillStyle = 'blue';
                //context.fillRect(centerX-5, 26, 10, canvas.height-50);
                
                context.lineWidth = 2;
                context.strokeStyle = '#0000';
                // draw the borders
                context.beginPath();
                context.arc(centerX, centerY, radius+2, -0.4 * Math.PI, 1.4 * Math.PI, false);
                context.moveTo(centerX-7, centerY-20);
                context.lineTo(centerX-7, 32);
                context.arc(centerX,32,7,Math.PI,2*Math.PI,false);
                context.moveTo(centerX+7, 32);
                context.lineTo(centerX+7, centerY-20);
                
                context.stroke();
                context.closePath();
                
                // draw the readings
                context.fillStyle    = '#000';
                context.font         = 'italic 12px sans-serif';
                context.textBaseline = 'middle';
                context.beginPath();
                var c_xbegin = centerX-10;
                var f_xbegin = centerX+10;
                var full = 20;
                var half = 10;
                var c_textl = 50;
                var f_textl = 30;
                var c_ybegin = 420;
                var c_yend = 50;
                var c_yrange = c_ybegin-c_yend;
                var c_incre = c_yrange/22;
                for(var t=-50; t<=60; t=t+5)
                {
                    var y_pos = c_ybegin - c_incre*(t+50)/5;
                    if(t%10==0)
                    {
                        context.moveTo(c_xbegin,y_pos);
                        context.lineTo(c_xbegin-full,y_pos);
                        context.fillText  (t, c_xbegin-c_textl, y_pos);
                    }
                    else
                    {
                        context.moveTo(c_xbegin,y_pos);
                        context.lineTo(c_xbegin-half,y_pos);
                    }
                }
                var f_incre = c_yrange*10/198;
                var f_ybegin = c_ybegin-2*c_incre;
                for(var t=-60; t<=140; t=t+10)
                {
                    var y_pos = f_ybegin - f_incre*(t+40)/10;
                    context.moveTo(f_xbegin,y_pos);
                    context.lineTo(f_xbegin+full,y_pos);
                    context.fillText  (t, f_xbegin+f_textl, y_pos);
                }
                context.stroke();
                context.closePath();
                
                var canvasPosition = {
                    x: canvas.offset().left,
                    y: canvas.offset().top
                };
                canvas.on('click', function(e) {
                          
                          // use pageX and pageY to get the mouse position
                          // relative to the browser window
                          
                          var mouse = {
                          x: e.pageX - canvasPosition.x,
                          y: e.pageY - canvasPosition.y
                          }
                          
                          // now you have local coordinates,
                          // which consider a (0,0) origin at the
                          // top-left of canvas element
                          });
                
                </script>
            
            <div id="liquidwrapper">
                <input id="defaultSlider" type="range" min="0" max="200" value="92"/>
            </div>
            
            <div id="cbox">
                <input type="text" id="Cvalue" value="0"/>
            </div>
            <div id="cdegree">
            <label id=>°C</label>
            </div>
            
            <div id="fbox">
                <input type="text" id="Fvalue" value="32"/>
            </div>
            <div id="fdegree">
                <label>°F</label>
                </div>


        </div>
        
                
                
        <script>
            
            $(function(){
              
              $(":range").rangeinput({
                                     progress: true,
                                     max: 60
                                     });


              var Cvalue = document.getElementById('Cvalue');
              var Fvalue = document.getElementById('Fvalue');
              
              $('#defaultSlider').change(function(){
                                         var vv=parseInt(this.value);
                                         Fvalue.value=(vv-60);
                                         Cvalue.value=(vv-92)*5/9;
                                         });
              //$('#defaultSlider').change(function(){                                         });
              // Trigger the event on load, so
              // the value field is populated:
              
              //$('#defaultSlider').change();
              
              var sliderapi = $("#defaultSlider").data("rangeinput");
              $('#Fvalue').change(function()
                                  {
                                  sliderapi.setValue(parseInt(this.value)+60);
                                  Cvalue.value=(parseInt(this.value)-32)*5/9;
                                  });
              
              $('#Cvalue').change(function()
                                  {
                                  Fvalue.value=1.8*parseInt(this.value)+32;
                                  sliderapi.setValue(Fvalue.value+60);
                                  });
               
              
              });
        </script>
    </body>
</html>